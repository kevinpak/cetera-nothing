<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Описание репозитория</title>
    <style>
        body {
            font-family: Georgia, serif;
            margin: 1em 5%;
        }

        h1, h2, h3, h4, h5, h6, .title, .title, thead {
            font-family: Arial, Helvetica, sans-serif;
        }

        a {
            color: blue;
            text-decoration: underline;
        }

        a:visited {
            color: #F0F;
        }

        em {
            background-color: #EAF3FF;
            border: 1px solid #D9E8FC;
            border-radius: 3px 3px 3px 3px;
            color: navy;
            font-style: italic;
            padding: 0 3px;
        }

        strong {
            font-weight: 700;
            color: #083194;
        }

        h1, h2, h3, h4, h5, h6 {
            color: #527bbd;
            margin-top: 1.2em;
            margin-bottom: .5em;
            line-height: 1.3;
        }

        h1, h2, h3 {
            border-bottom: 2px solid silver;
        }

        h2 {
            padding-top: .5em;
        }

        h5 {
            font-size: 1em;
        }

        .important {
            background-color: #FFE5E5;
            border-left: 5px solid #B70101;
            color: #B70101;
            font-style: italic;
            padding: 10px 15px;
        }
    </style>
</head>
<body>
<h1>Ветки</h1>

<h2>Ветки bitrix_*</h2>

<h3>bitrix_base</h3>

<p>Абстрактный сайт на Bitrix.<br />В комплекте <em>.htaccess</em>, <em>.gitignore</em>, <em>robots.txt</em>.</p>

<p>В <em>php_interface/</em> <em>init.php</em> вызывается Autoloader через 
    <a target="_blank" href="https://getcomposer.org/">Composer</a> из
    <em>include/</em>. В <em>include/lib/</em> набор базовых классов для расширения функций битрикса. Например, JsIncludes.php для управления подключением js файлов. В <em>include/app/</em> складывайте классы текущего проекта. В <em>include/vendor/</em> установятся внешние библиотеки с помощью Composer.
</p>

<p>В components/[namespace]:</p>
<ul>
    <li>
        <a target="_blank" href="https://github.com/Londeren/Bitrix/tree/master/Components/sorting">sorting</a> - компонент для сортировки списка элементов инфоблока по
        <a href="http://dev.1c-bitrix.ru/api_help/iblock/classes/ciblockelement/getlist.php" target="_blank">всем возможным</a> значениям сортировки.
    </li>
    <li>
        <a target="_blank" href="http://dev.1c-bitrix.ru/community/webdev/user/16182/blog/1184/">super.component</a> - Супер компонент для любых проектов.<br />
    </li>
</ul>
<h4>Настройка</h4>
<ol>
    <li class="important"><i>install.php</i> - установщик для ветки. Задает namespace для проекта.</li>
    <li><em>404.php</em> - изменить ссылку на форму приема ошибок</li>
    <li><em>500.html</em> - изменить ссылку на форму приема ошибок</li>
    <li><em>favicon.ico</em> - заменить</li>
    <li><em>humans.txt</em> - заполнить актуальной информацией</li>
    <li>Удалить тело метода <em>include/app/Configuration::deferredInit()</em>, если не требуется</li>
    <li>Удалить тело метода <em>include/app/Configuration::handlersInit()</em>, если не требуется</li>
    <li>Установить внешние библиотеки через Composer, используя <em>include/composer.json</em></li>
</ol>

<h3>bitrix_templates_single</h3>

<p>Сайт на битриксе с одним шаблоном. Используется, если все страницы сайта имеют одинаковый дизайн или отличия очень незначительны.</p>

<p class="important">Не стоит использовать этот шаблон, если главная или другие страницы имеют
    <b>значительные</b> отличия в дизайне. <br>
    <b>Например</b>, на главной странице верстка в три колонки, а на остальных страницах сайта - в две.</p>
<h4>Рекомендации по использованию</h4>
<ul>
    <li>Все файлы стилей лежат в <em>local/templates/[namespace]/css</em>.</li>
    <li>Файл стилей <strong>единственный</strong>, называется <em>style.css</em>. Редактируются стили в файлах
        <a href="http://sass-lang.com/" target="_blank">SCSS</a> (файлы инклюдятся через
        <em>@import</em>), находящихся в этой же папке и собираются в данный файл <em>style.css</em>. Таким образом файл
        <em>style.css</em> вручную никогда не правится
    </li>
    <li>Все изображения, иконки и т.д., относящиеся к дизайну сайта, находятся в
        <em>local/templates/[namespace]/images</em>
    </li>
    <li>Все файлы включаемых областей находятся в <em>local/templates/[namespace]/include_areas</em></li>
    <li>Весь JavaScript код находится в
        <em>local/templates/[namespace]/js</em>. Сторонние плагины, библиотеки, фреймворки находятся в подкаталоге
        <em>/vendor</em>. Общие для всего сайта скрипты находятся в файле
        <em>local/templates/[namespace]/js/common.js</em>
    </li>
    <li></li>
</ul>
<h4>Настройка</h4>
<ol>
    <li class="important"><i>install.php</i> - установщик для ветки. Задает namespace для проекта.</li>
    <li><em>local/template/[namespace]</em> description.php - изменить название шаблона, если требуется</li>
</ol>

<h3>bitrix_templates_multiple</h3>

<p>Сайт на битриксе с несколькими шаблонами. Используется, если страницы сайта
    <strong>существенно</strong> отличаются по дизайну одна от другой (то есть, если общими для них являются, максимум, хедер и футер).
</p>
<h4>Рекомендации по использованию</h4>
<ul>
    <li>Общие для всех страниц сайта header и footer находятся в шаблоне
        <em>[namespace]_common</em>. То есть чем больше общего (сравнивать HTML) есть у страниц <strong>index</strong> и
        <strong>regular</strong>, тем больше HTML должно оказаться в этом шаблоне
    </li>
    <li>При прописывании путей до картинок в дизайне вместо привычной константы
        <em>SITE_TEMPLATE_PATH</em> следует использовать <em>[namespace]_TEMPLATE_PATH</em></li>
    <li>Все файлы стилей лежат в <em>local/templates/[namespace]_common/css</em>.</li>
    <li>Файл стилей <strong>единственный</strong>, называется <em>style.css</em>. Редактируются стили в файлах
        <a href="http://sass-lang.com/" target="_blank">SCSS</a> (файлы инклюдятся через
        <em>@import</em>), находящихся в этой же папке и собираются в данный файл <em>style.css</em>. Таким образом файл
        <em>style.css</em> вручную никогда не правится
    </li>
    <li>Все изображения, иконки и т.д., относящиеся к дизайну сайта, находятся в
        <em>local/templates/[namespace]_common/images</em></li>
    <li>Все файлы включаемых областей находятся в <em>local/templates/[namespace]_common/include_areas</em></li>
    <li>Весь JavaScript код находится в
        <em>local/templates/[namespace]_common/js</em>. Сторонние плагины, библиотеки, фреймворки находятся в подкаталоге
        <em>/vendor</em>. Общие для всего сайта скрипты находятся в файле
        <em>local/templates/[namespace]_common/js/common.js</em></li>
</ul>
<h4>Настройка</h4>
<ol>
    <li class="important"><i>install.php</i> - установщик для ветки. Задает namespace для проекта.</li>
    <li>Для всех трех шаблонов
        <em>local/template/[namespace]</em> description.php - изменить название шаблона, если требуется
    </li>
    <li>Перенести содержимое файла <em>local/php_interface/s1/init.php</em> в
        <em>local/php_interface/init.php</em>. После этого папку <em>local/php_interface/s1</em> можно удалить
    </li>
</ol>

<h3>Использование</h3>
<ol>
    <li>Установить bitrix из дистрибутива в кодировке <em>UTF-8</em></li>
    <li>Клонировать ветку <em>bitrix_base</em>, установить ее с помощью install.php</li>
    <li>Поверх дистрибутива накатить установленный <em>bitrix_base</em>

        <div class="important">Возможно, следует перед этим сравнить файлы <em>.htaccess</em>,
            <em>init.php</em> с оригиналами и смержить их, если требуется
        </div>
    </li>
    <li>По дизайну сайта понять какой тип шаблона будет использоваться (<em>single</em> или <em>multiple</em>)</li>
    <li>Удалить из установленного bitrix из папки <em>bitrix/templates</em> все шаблоны.
        <em>.default</em> при необходимости перенести в <em>local/templates</em>
    </li>
    <li>Клонировать соответствующую ветку с шаблоном, установить ее с помощью install.php</li>
    <li>Накатить в <em>local/templates</em> установленный выше выбранный шаблон</li>
    <li>Внести изменения в файлы в соответствии с разделами
        <em>Настройка</em>, относящиеся к соответствующим веткам (см. выше) в соответствии с данными по создаваемому проекту.
    </li>
</ol>


<h2>Ветка layout</h2>

<p>Верстка макета сайта. <br>
    Используются:
    <a href="http://foundation.zurb.com/" target="_blank">Foundation</a> в качестве базисного css фреймворка: колонки, формы, типографика;
    <a href="http://sass-lang.com/" target="_blank">SCSS</a>.</p>

<p>Структура:</p>
<ul>
    <li><em>css</em> - файлы стилей.
        <ul>
            <li>
                <em>style.scss</em> - основной файл стилей, именно он подключается как файл css (точнее сгенерированный из него <em>style.css</em>)
            </li>
            <li><em>/foundation/</em> - каталог с файлами стилей Foundation</li>
        </ul>
    </li>
    <li>
        <em>i</em> - контентные изображения макета. То есть все, что не относится непосредственно к стилевому содержанию сайта. Например баннеры, картинки к новостям и т.д.
    </li>
    <li><em>images</em> - картинки дизайна</li>
    <li><em>js</em> - JavaScript код. <em>common.js</em> - файл для пользовательского кода</li>
    <li><em>index.html</em>, <em>regular.html</em> - html код верстаемых страниц, главной и рядовой соответственно</li>
</ul>

</body>
</html>